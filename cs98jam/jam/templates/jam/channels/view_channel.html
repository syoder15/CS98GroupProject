{% extends "../../jam/templates/jam/index/index.html" %}

{% block styles %}
    {% load staticfiles %}
    {{block.super}}
{% endblock %}

{% block content %}
	
<div>
	{% if is_admin %}
		<a href="../../view_as_admin/{{ channel_name }}">Switch to Administrator View</a>
	
	{% endif %}
	
	<p>Name: {{ channel_name }} </p>
	<p>Nickname: {{ channel_nickname }} </p>
	<p>Description: {{ channel_description }} </p>
	<p>Categories: 
		{% for c in categories %}
			{{ c }} <br>
		{% endfor %}</p>
	{% if channel_status %}
		<p>Status: Public </p>
	{% else %}
		<p>Status: Private </p>
	{% endif %}
	
	<form class="joinChannel" method="POST">
		{% csrf_token %}
		
		{% if is_subscriber %}
			<p>You are subscribed to this channel!</p>
			<input class="button" name="Unsubscribe" type="submit" value="Unsubscribe"/>
			
		{% elif channel_status %}
			<p>
				<input class="button" name="Subscribe" type="submit" value="Subscribe"/>
			</p>
		{% else %}
			<p>
				<input class="button" type="submit" value="Request to join"/>
			</p>
		{% endif %}	
	</form>
	
	
	<h3>All Events</h3>
	<ul>{% for e in unadded_e.all %}
	<li>{{ e }} - {{e.next_occurrence.start_time}}</li>
	<form class="addEvent" method="POST">
		{% csrf_token %}
		<input class="button" name="{{e.pk}}" type="submit" value="Add"/>
	</form>
	{% endfor %}
	
	<ul>{% for e in added_e.all %}
	<li><a href="{{ e.get_absolute_url }}">{{ e }}</a> - {{e.next_occurrence.start_time}}</li>
	
	{% endfor %}
</div>

{% endblock %}

	
{% block javascript %}
{{ block.super }}

{% endblock %}