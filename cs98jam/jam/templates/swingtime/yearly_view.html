{% extends "../../jam/templates/jam/index.html" %}


{% block styles %}
    {% load staticfiles %}
    {{block.super}}
    <link rel="stylesheet" type="text/css" href="{% static 'css/calendar.css' %}" />
{% endblock %}


{% block content %}
<div class="menuBar"></div>
<div>
            <a href="{% url 'swingtime-monthly-view' current_datetime.year current_datetime.month %}" class="firstLink calLink">
                <button>Monthly View</button>
            </a>
            <a href="{% url 'swingtime-yearly-view' current_datetime.year %}" class="calLink">
                <button class="yearlyViewButton">Yearly View</button>
            </a>
            <a href="{% url 'swingtime-events' %}" class="calLink">
                <button>Event Listing</button>
            </a> 
            <a href="{% url 'swingtime-add-event' %}?dtstart={{ tm.isoformat }}" class="calLink">
                <button>Add Event</button>
            </a>
</div>

<h3>
    <a href="{% url 'swingtime-yearly-view' last_year %}" 
       title="Last Month">&larr;</a>
    Yearly View {{ year }}
    <a href="{% url 'swingtime-yearly-view' next_year %}" 
       title="Next Month">&rarr;</a>
</h3>

{% if by_month %}
<table>
    <thead>
        <tr>
            <th>Month</th>
            <th>Title</th>
            <th>Day</th>
            <th>Start</th>
            <th>End</th>
        </tr>
    </thead>
    <tbody>
    {% for dt,occurrences in by_month %}
    <tr class="month-divider">
        <th rowspan="{{ occurrences|length }}">
            <a href="{% url 'swingtime-monthly-view' dt.year dt.month %}">
                {{ dt|date:"F" }}</a>
        </th>
        {% for o in occurrences %}
        <td><a href="{{ o.get_absolute_url }}">{{ o.title }}</a></td>
        <td>{{ o.start_time|date:"M jS - l" }}</td>
        <td>{{ o.start_time|date:"P" }}</td>
        <td>{{ o.end_time|date:"P" }}</td>
    </tr>
        {% if not forloop.last %}
    <tr>
        {% endif %}
        {% endfor %}
    {% endfor %}
    </tbody>
</table>
{% else %}
<p>No events occurring in {{ year }}</p>
{% endif %}
<form><input type="button" onclick="history.back();" value="Back"></form>

{% endblock %}

{% block javascript %}
<script src="{% static 'jam/js/jquery-2.1.1.min.js' %}"></script>
<script src="{% static 'js/events.js' %}"></script>
{% endblock %}